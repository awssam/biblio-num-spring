<!-- fragments/pagination.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Pagination Fragment</title>
</head>
<body>
    <!-- Pagination Fragment -->
    <div th:fragment="pagination(opage, urlBase, searchParam)" th:if="${opage != null}">
        <div th:if="${opage.totalPages > 0}" class="d-flex justify-content-between align-items-center flex-wrap">
            <nav aria-label="Page navigation">
                <ul class="pagination mb-0">
                    <!-- First Page Link -->
                    <li th:class="${opage.first} ? 'page-item disabled' : 'page-item'">
                        <a class="page-link"
                           th:href="@{${urlBase}(page=0, search=${searchParam})}"
                           aria-label="First">
                            <span aria-hidden="true">&laquo;&laquo;</span>
                        </a>
                    </li>

                    <!-- Previous Page Link -->
                    <li th:class="${opage.first} ? 'page-item disabled' : 'page-item'">
                        <a class="page-link"
                           th:href="@{${urlBase}(page=${opage.number - 1}, search=${searchParam})}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>

                    <!-- Page Numbers -->
                    <li th:each="i : ${#numbers.sequence(T(java.lang.Math).max(0, opage.number - 2), T(java.lang.Math).min(opage.totalPages - 1, opage.number + 2))}"
                        th:class="${opage.number == i} ? 'page-item active' : 'page-item'">
                        <a class="page-link"
                           th:href="@{${urlBase}(page=${i}, search=${searchParam})}"
                           th:text="${i + 1}">1</a>
                    </li>

                    <!-- Next Page Link -->
                    <li th:class="${opage.last} ? 'page-item disabled' : 'page-item'">
                        <a class="page-link"
                           th:href="@{${urlBase}(page=${opage.number + 1}, search=${searchParam})}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>

                    <!-- Last Page Link -->
                    <li th:class="${opage.last} ? 'page-item disabled' : 'page-item'">
                        <a class="page-link"
                           th:href="@{${urlBase}(page=${opage.totalPages - 1}, search=${searchParam})}"
                           aria-label="Last">
                            <span aria-hidden="true">&raquo;&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Pagination Info -->
            <p class="text-muted small mb-0 ms-3">
                Page <span th:text="${opage.number + 1}">1</span> sur <span th:text="${opage.totalPages}">1</span> •
                Affichage de <span
                    th:text="${opage.numberOfElements > 0 ? opage.size * opage.number + 1 : 0}">1</span>-<span
                    th:text="${opage.numberOfElements > 0 ? opage.size * opage.number + opage.numberOfElements : 0}">10</span>
                sur <span th:text="${opage.totalElements}">100</span> résultats
            </p>
        </div>
    </div>
</body>
</html>
